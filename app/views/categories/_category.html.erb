<div class="panel panel-primary" style="border-color: #e8e8e8;
  margin-bottom: 60px" id="category_<%= category.id %>">
  <div class="panel-heading"><%= category.name %></div>
  <div class="panel-body">
    <% category.books.paginate(page: params[:page], per_page: 8).each do |book| %>
      <% if (@count_book % 4) == 1 %>
          <div class="row" style="margin-bottom: 30px">
            <div class="col-sm-3 col-md-3 col-lg-3" id="book_<%= book.id %>">
              <%= link_to [book.category, book], class: "thumbnail", style: "border: none" do %>
                <% if book.image? %>
                 <%= image_tag(book.image.url, style: "width:100%") %>
                <% else %>
                  <%= image_tag("image.jpg", style: "width:100%",
                    alt: "Book image") %>
                <% end %>
                <div class="caption text-center">
                  <p><%= book.name %></p>
                </div>
              <% end %>
              <% if current_user.present? && ((current_user.role_id == 2) ||
                (current_user.role_id == 3)) %>
                <div class="text-center">
                  <%= link_to edit_book_path(book), remote: true do %>
                    <i class="far fa-edit" style="font-size: 18px; color: #337ab7"></i>
                  <% end %>
                  <%= link_to book, method: :delete, data: {confirm: "Are you sure?",
                    remote: true}, class: "delete" do %>
                    <i class="far fa-trash-alt" style="font-size: 18px; color: #337ab7;
                      margin-left: 8px"></i>
                  <% end %>
                </div>
              <% end %>
            </div>
          <% if @count_book == (category.books.count - 8*(params[:page].to_i - 1)) %>
            </div>
          <% end %>
      <% elsif (@count_book % 4) == 2 %>
        <div class="col-sm-3 col-md-3 col-lg-3" id="book_<%= book.id %>">
          <%= link_to [book.category, book], class: "thumbnail", style: "border: none" do %>
            <% if book.image? %>
             <%= image_tag(book.image.url, style: "width:100%") %>
            <% else %>
              <%= image_tag("image.jpg", style: "width:100%",
                alt: "Book image") %>
            <% end %>
            <div class="caption text-center">
              <p><%= book.name %></p>
            </div>
          <% end %>
          <% if current_user.present? && ((current_user.role_id == 2) ||
            (current_user.role_id == 3)) %>
            <div class="text-center">
              <%= link_to edit_book_path(book), remote: true do %>
                <i class="far fa-edit" style="font-size: 18px; color: #337ab7"></i>
              <% end %>
              <%= link_to book, method: :delete, data: {confirm: "Are you sure?",
                remote: true}, class: "delete" do %>
                <i class="far fa-trash-alt" style="font-size: 18px; color: #337ab7;
                  margin-left: 8px"></i>
              <% end %>
            </div>
          <% end %>
        </div>
        <% if @count_book == (category.books.count - 8*(params[:page].to_i - 1)) %>
          </div>
        <% end %>
      <% elsif (@count_book % 4) == 3 %>
        <div class="col-sm-3 col-md-3 col-lg-3" id="book_<%= book.id %>">
          <%= link_to [book.category, book], class: "thumbnail", style: "border: none" do %>
            <% if book.image? %>
             <%= image_tag(book.image.url, style: "width:100%") %>
            <% else %>
              <%= image_tag("image.jpg", style: "width:100%",
                alt: "Book image") %>
            <% end %>
            <div class="caption text-center">
              <p><%= book.name %></p>
            </div>
          <% end %>
          <% if current_user.present? && ((current_user.role_id == 2) ||
            (current_user.role_id == 3)) %>
            <div class="text-center">
              <%= link_to edit_book_path(book), remote: true do %>
                <i class="far fa-edit" style="font-size: 18px; color: #337ab7"></i>
              <% end %>
              <%= link_to book, method: :delete, data: {confirm: "Are you sure?",
                remote: true}, class: "delete" do %>
                <i class="far fa-trash-alt" style="font-size: 18px; color: #337ab7;
                  margin-left: 8px"></i>
              <% end %>
            </div>
          <% end %>
        </div>
        <% if @count_book == (category.books.count - 8*(params[:page].to_i - 1)) %>
          </div>
        <% end %>
      <% else %>
          <div class="col-sm-3 col-md-3 col-lg-3" id="book_<%= book.id %>">
            <%= link_to [book.category, book], class: "thumbnail", style: "border: none" do %>
            <% if book.image? %>
             <%= image_tag(book.image.url, style: "width:100%") %>
            <% else %>
              <%= image_tag("image.jpg", style: "width:100%",
                alt: "Book image") %>
            <% end %>
            <div class="caption text-center">
              <p><%= book.name %></p>
            </div>
            <% end %>
            <% if current_user.present? && ((current_user.role_id == 2) ||
              (current_user.role_id == 3)) %>
              <div class="text-center">
                <%= link_to edit_book_path(book), remote: true do %>
                  <i class="far fa-edit" style="font-size: 18px; color: #337ab7"></i>
                <% end %>
                <%= link_to book, method: :delete, data: {confirm: "Are you sure?",
                  remote: true}, class: "delete" do %>
                  <i class="far fa-trash-alt" style="font-size: 18px; color: #337ab7;
                    margin-left: 8px"></i>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>

      <% @count_book += 1 %>
    <% end %>
    <% @count_book = 1 %>
  </div>
  <div class="text-center">
    <%= will_paginate category.books.paginate(page: params[:page], per_page: 8) %>
  </div>
</div>
